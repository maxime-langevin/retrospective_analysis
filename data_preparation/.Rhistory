geom_line(aes(date, reality)) +
facet_wrap(vars(report))
ggplot(temp) +
geom_line(aes(date, value, group=scenario_type, color="scenarios")) +
geom_line(aes(date, reality, group=scenario_type, color="reality")) +
facet_wrap(vars(report))
ggplot(temp) +
geom_line(aes(date, value, group=scenario_type, color="scenarios")) +
geom_line(aes(date, reality, group=scenario_type, color="reality")) +
facet_wrap(vars(report)) +
g_theme
ggplot(temp) +
geom_line(aes(date, value, group=scenario_type, color="scenarios")) +
geom_line(aes(date, reality, group=scenario_type, color="reality")) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(temp) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
temp %>%
filter(
report %in% c("Apr 26, 2021", "May 21, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jul 26, 2021", "Aug 05, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Apr 26, 2021", "May 21, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report)) +
scale_color_manual(values=c('#ff0000','#D8D8D8'), nrow=1)
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(aes(date, reality, group=scenario_type, color="reality"), linewidth=1) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, group=scenario_type, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8'))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.4
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(aes(date, value, group=scenario_type, color="scenarios"), linewidth=1) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
geom_line(
aes(date, value, group=scenario_type, color="scenarios"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
ggplot(
data_new_hosp %>%
filter(
report %in% c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
)
) +
geom_line(
aes(date, value, group=scenario_type, color="scenarios"),
linewidth=1
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
labs(
x="", y="hospital admissions", color=""
)
f_graph_short_term_changes <-
function(
reports, #a string vector of the reports to select
date_min, date_max #x limits of the graph
){
ggplot(
data_new_hosp %>%
filter(
report %in% reports
)
) +
geom_line(
aes(date, value, group=scenario_type, color="scenarios"),
linewidth=1
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date(date_min), as.Date(date_max)) +
labs(
x="", y="hospital admissions", color=""
)
}
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021"),
"2021-01-01", "2021-04-01"
)
f_graph_short_term_changes <-
function(
reports, #a string vector of the reports to select
date_min, date_max #x limits of the graph
){
g <-
ggplot(
data_new_hosp %>%
filter(
report %in% reports
)
) +
geom_line(
aes(date, value, group=scenario_type, color="scenarios"),
linewidth=1
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
xlim(as.Date(date_min), as.Date(date_max)) +
labs(
x="", y="hospital admissions", color=""
)
return(g)
}
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021"),
"2021-01-01", "2021-04-01"
)
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021"),
"2021-01-01", "2021-04-01"
)
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021"),
"2021-01-01", "2021-07-01"
)
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021"),
"2021-04-01", "2021-07-01"
)
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021"),
"2021-04-01", "2021-06-20"
)
f_graph_short_term_changes <-
function(
reports, #a string vector of the reports to select
date_min, date_max #x limits of the graph
){
g <-
ggplot(
data_new_hosp %>%
filter(
report %in% reports
)
) +
geom_line(
aes(date, value, group=scenario_type, color="scenarios"),
linewidth=1
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp, color="reality"),
alpha=.2
) +
geom_line(
data = reality_new_hosp_adm,
aes(date, new_hosp_smooth, color="reality"),
linewidth=1
) +
facet_wrap(vars(report), nrow=1) +
scale_color_manual(values=c('#ff0000','#D8D8D8')) +
labs(
x="", y="hospital admissions", color=""
)
return(g)
}
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021"),
"2021-04-01", "2021-06-20"
)
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20"))
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20")) +
ylim(0, 2000)
f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20")) +
ylim(0, 2100)
f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-06-01"), as.Date("2021-10-20")) +
ylim(0, 2100)
f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-06-01"), as.Date("2021-10-20")) +
ylim(0, NA)
f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-01"), as.Date("2021-10-20")) +
ylim(0, NA)
f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-15"), as.Date("2021-10-20")) +
ylim(0, NA)
f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-15"), as.Date("2021-10-01")) +
ylim(0, NA)
g1 <- f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01"))
g2 <- f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20")) +
ylim(0, 2100)
g3 <- f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-15"), as.Date("2021-10-01")) +
ylim(0, NA)
plot_grid(
g1,
plot_grid(
g2, g3, nrow=1
),
nrow = 2
)
g1 <- f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
theme(legend.position = "none")
g2 <- f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20")) +
ylim(0, 2100) +
theme(legend.position = c(0.8, 0.6))
g3 <- f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-15"), as.Date("2021-10-01")) +
ylim(0, NA) +
theme(legend.position = "none")
plot_grid(
g1,
plot_grid(
g2, g3, nrow=1
),
nrow = 2
)
g1 <- f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
theme(legend.position = c(0.9, 0.8))
g2 <- f_graph_short_term_changes(
c("Apr 26, 2021", "May 21, 2021")
) +
xlim(as.Date("2021-04-01"), as.Date("2021-06-20")) +
ylim(0, 2100) +
theme(legend.position = "none")
g3 <- f_graph_short_term_changes(
c("Jul 26, 2021", "Aug 05, 2021")
) +
xlim(as.Date("2021-07-15"), as.Date("2021-10-01")) +
ylim(0, NA) +
theme(legend.position = "none")
plot_grid(
g1,
plot_grid(
g2, g3, nrow=1
),
nrow = 2
)
?plot_grid
plot_grid(
g1,
plot_grid(
g2, g3, nrow=1, labels=(c("b", "c"))
),
nrow = 2, labels=c("a", "")
)
g1 <- f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
ylim(0, 3000) +
theme(legend.position = c(0.9, 0.8))
plot_grid(
g1,
plot_grid(
g2, g3, nrow=1, labels=(c("b", "c"))
),
nrow = 2, labels=c("a", "")
)
as.Date(c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021"))
temp <- data_frame(
report = c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021"),
x = c(as.Date("2021-01-16"), as.Date("2021-01-20"), as.Date("2021-01-20"), as.Date("2021-01-20"))
)
g1 <-
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
ylim(0, 3000) +
theme(legend.position = c(0.9, 0.8)) +
geom_vline(data = temp, xintercept = x)
g1 <-
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
ylim(0, 3000) +
theme(legend.position = c(0.9, 0.8)) +
geom_vline(data = temp, aes(xintercept = x))
g1
temp <- data_frame(
report = c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021"),
x = c(as.Date("2021-01-16"), as.Date("2021-02-20"), as.Date("2021-02-20"), as.Date("2021-02-20"))
)
g1 <-
f_graph_short_term_changes(
c("Jan 16, 2021", "Feb 02, 2021", "Feb 08, 2021", "Feb 23, 2021")
) +
xlim(as.Date("2021-01-01"), as.Date("2021-04-01")) +
ylim(0, 3000) +
theme(legend.position = c(0.9, 0.8)) +
geom_vline(data = temp, aes(xintercept = x))
g1
